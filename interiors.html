<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Наши интерьеры - Avesimyera</title>
    <link rel="icon" type="image/png" href="/favicon/1.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500&family=Montserrat:wght@200;300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/src/atelier.css">
    <link rel="stylesheet" href="/src/interiors/interiors.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        plum: {
                            50: '#f9f5f7',
                            100: '#f4ebf0',
                            200: '#e8d6e0',
                            300: '#d5b5c7',
                            400: '#bc8da6',
                            500: '#a36b87',
                            600: '#86516a',
                            700: '#6f4155',
                            800: '#5c3746',
                            900: '#4d313d',
                        },
                        stone: {
                            50: '#fafaf9',
                            100: '#f5f5f4',
                            200: '#e7e5e4',
                            800: '#292524',
                            900: '#1c1917',
                        }
                    },
                    fontFamily: {
                        serif: ['"Cormorant Garamond"', 'serif'],
                        sans: ['"Montserrat"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>
<body class="flex flex-col min-h-screen">

    <div id="loader">
        <div class="overflow-hidden">
            <h1 class="font-serif text-3xl tracking-03em uppercase animate-pulse">AVESIMYERA</h1>
        </div>
        <div class="mt-4 w-48 h-1px bg-stone-100 relative overflow-hidden">
            <div id="loader-progress" class="absolute inset-0 bg-stone-800 transition-all duration-1000" style="width: 0%"></div>
        </div>
        <p class="mt-4 text-10px tracking-02em text-stone-400">EST. 2025 | RUSSIA</p>
    </div>

    <nav class="fixed w-full z-100 bg-white/70 backdrop-blur-md border-b border-stone-100">
        <div class="max-w-7xl mx-auto px-6 py-5 flex justify-between items-center">
            <a href="/" class="text-2xl tracking-03em serif font-light">AVESIMYERA</a>
            
            <div class="hidden md:flex space-x-10 text-10px uppercase tracking-widest font-light">
                <a href="/" class="nav-link">О студии</a>
                <a href="/catalog.html" class="nav-link">Каталог</a>
                <a href="/blog.html" class="nav-link">Блог</a>
                <a href="/#how-it-works" class="nav-link">Процесс</a>
                <a href="/#faq" class="nav-link">Вопрос-ответ</a>
                <a href="/#service-info" class="nav-link">Контакты</a>
                <a href="/profile.html" class="nav-link">Профиль</a>
            </div>

            <div class="flex items-center space-x-6">
                <div class="hidden md:flex items-center space-x-6">
                    <button onclick="openAuthModal()" class="hover:scale-110 transition-transform" aria-label="Профиль">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </button>
                    <button onclick="toggleCart()" class="relative hover:scale-110 transition-transform">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2">
                            <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
                            <path d="M3 6h18"></path>
                            <path d="M16 10a4 4 0 0 1-8 0"></path>
                        </svg>
                        <span id="cart-badge" class="absolute -top-2 -right-2 bg-stone-900 text-white text-8px w-4 h-4 rounded-full flex items-center justify-center">0</span>
                    </button>
                </div>
                <button id="mobile-menu-btn" class="md:hidden p-2" onclick="toggleMobileMenu()" aria-label="Меню">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M3 12h18M3 6h18M3 18h18"></path>
                    </svg>
                </button>
            </div>
        </div>
        
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-stone-100">
            <div class="px-6 py-4 space-y-4">
                <a href="/" class="block text-sm uppercase tracking-widest font-light py-2 border-b border-stone-100" onclick="toggleMobileMenu()">О студии</a>
                <a href="/catalog.html" class="block text-sm uppercase tracking-widest font-light py-2 border-b border-stone-100" onclick="toggleMobileMenu()">Каталог</a>
                <a href="/blog.html" class="block text-sm uppercase tracking-widest font-light py-2 border-b border-stone-100" onclick="toggleMobileMenu()">Блог</a>
                <a href="/#how-it-works" class="block text-sm uppercase tracking-widest font-light py-2 border-b border-stone-100" onclick="toggleMobileMenu()">Процесс</a>
                <a href="/#faq" class="block text-sm uppercase tracking-widest font-light py-2 border-b border-stone-100" onclick="toggleMobileMenu()">Вопрос-ответ</a>
                <a href="/#service-info" class="block text-sm uppercase tracking-widest font-light py-2 border-b border-stone-100" onclick="toggleMobileMenu()">Контакты</a>
                <button onclick="openAuthModal(); toggleMobileMenu()" class="block w-full text-left text-sm uppercase tracking-widest font-light py-2 border-b border-stone-100">Профиль</button>
                <button onclick="toggleCart(); toggleMobileMenu();" class="block w-full text-left text-sm uppercase tracking-widest font-light py-2">Корзина</button>
            </div>
        </div>
    </nav>

    <header class="w-full pt-32 pb-16 md:pt-40 md:pb-24 text-center px-4 bg-stone-50">
        <div class="max-w-3xl mx-auto">
            <span class="text-plum-500 tracking-[0.2em] text-xs uppercase mb-4 block">Портфолио</span>
            <h1 class="text-4xl md:text-5xl lg:text-6xl text-plum-900 mb-6 serif-font italic">
                Искусство Жить Красиво
            </h1>
            <p class="text-stone-500 font-light text-lg leading-relaxed max-w-2xl mx-auto">
                Мы создаем мебель, которая становится сердцем вашего дома. 
                От уютных спален до функциональных кухонь — каждый проект уникален, 
                как и его владельцы.
            </p>
        </div>
    </header>

    <section class="w-full py-12 bg-white border-y border-stone-100">
        <div class="max-w-7xl mx-auto px-4 md:px-8 grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div class="order-2 md:order-1">
                <h3 class="text-2xl text-plum-800 serif-font mb-4 italic">Наш опыт в цифрах</h3>
                <p class="text-stone-600 font-light mb-6">
                    За годы работы мы реализовали сотни проектов. Мы специализируемся не только на мягкой мебели, 
                    но и на сложных корпусных решениях. Статистика наших реализованных проектов за последний год:
                </p>
                <ul class="space-y-3 font-light text-stone-700">
                    <li class="flex items-center">
                        <span class="w-2 h-2 rounded-full bg-plum-300 mr-3"></span>
                        Более <strong class="mx-1">150</strong> уникальных кухонных гарнитуров
                    </li>
                    <li class="flex items-center">
                        <span class="w-2 h-2 rounded-full bg-plum-500 mr-3"></span>
                        <strong class="mx-1">300+</strong> мягких диванов и кресел
                    </li>
                    <li class="flex items-center">
                        <span class="w-2 h-2 rounded-full bg-plum-700 mr-3"></span>
                        Полная меблировка <strong class="mx-1">45</strong> квартир "под ключ"
                    </li>
                </ul>
            </div>
            <div class="order-1 md:order-2 flex justify-center w-full">
                <div class="chart-container">
                    <canvas id="projectsChart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <main class="w-full py-16 px-4 md:px-8 max-w-[1600px] mx-auto">
        
        <div class="flex flex-wrap justify-center gap-4 mb-12" id="filter-container">
        </div>

        <div id="gallery-grid" class="masonry-grid">
            <div class="masonry-item reveal active">
                <div class="image-zoom rounded-2xl bg-stone-100">
                    <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?q=80&w=800&auto=format&fit=crop" alt="Кабинет в стиле лофт" class="w-full h-full object-cover" onerror="this.parentElement.innerHTML='<div class=\'w-full h-full image-placeholder\'>Кабинет</div>'">
                </div>
                <div class="mt-4 flex justify-between items-start">
                    <div>
                        <h3 class="font-serif text-lg">Pure Silence</h3>
                        <p class="text-[10px] uppercase tracking-widest text-stone-400">Свет и воздух</p>
                    </div>
                    <span class="text-[10px] text-plum-300">#01</span>
                </div>
            </div>

            <div class="masonry-item reveal active">
                <div class="image-zoom rounded-2xl bg-stone-100 aspect-[4/5]">
                    <img src="https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?q=80&w=800&auto=format&fit=crop" alt="Ванная" class="h-full w-full object-cover" onerror="this.parentElement.innerHTML='<div class=\'w-full h-full image-placeholder\'>Ванная</div>'">
                </div>
                <div class="mt-4">
                    <h3 class="font-serif text-lg">Velvet Shadows</h3>
                    <p class="text-[10px] uppercase tracking-widest text-stone-400">Глубокие текстуры</p>
                </div>
            </div>

            <div class="masonry-item reveal">
                <div class="image-zoom rounded-2xl bg-stone-100 aspect-square">
                    <img src="https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=800&auto=format&fit=crop" alt="Прихожая" class="h-full w-full object-cover" onerror="this.parentElement.innerHTML='<div class=\'w-full h-full image-placeholder\'>Прихожая</div>'">
                </div>
                <div class="mt-4">
                    <h3 class="font-serif text-lg">Stone & Silk</h3>
                    <p class="text-[10px] uppercase tracking-widest text-stone-400">Акценты</p>
                </div>
            </div>

            <div class="masonry-item reveal">
                <div class="image-zoom rounded-2xl bg-stone-100">
                    <img src="https://images.unsplash.com/photo-1594620302200-9a762244a156?q=80&w=800&auto=format&fit=crop" alt="Полки и стеллажи" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" onerror="this.parentElement.innerHTML='<div class=\'w-full h-full image-placeholder\'>Полки и стеллажи</div>'">
                </div>
                <div class="mt-4">
                    <h3 class="font-serif text-lg">The Social Heart</h3>
                    <p class="text-[10px] uppercase tracking-widest text-stone-400">Кухни-столовые</p>
                </div>
            </div>

            <div class="masonry-item reveal">
                <div class="image-zoom rounded-2xl bg-stone-100 aspect-[3/4]">
                    <img src="https://images.unsplash.com/photo-1513519245088-0e12902e5a38?auto=format&fit=crop&q=80&w=800" class="w-full h-full object-cover transition-transform duration-700" alt="">
                </div>
                <div class="mt-4">
                    <h3 class="font-serif text-lg">Spa Ritual</h3>
                    <p class="text-[10px] uppercase tracking-widest text-stone-400">Релакс</p>
                </div>
            </div>

            <div class="masonry-item reveal active">
                <div class="image-zoom rounded-2xl bg-stone-100">
                    <img src="https://images.unsplash.com/photo-1615874959474-d609969a20ed?auto=format&fit=crop&q=80&w=800" class="rounded-2xl" alt="">
                </div>
                <div class="mt-4">
                    <h3 class="font-serif text-lg">Raw Marble</h3>
                    <p class="text-[10px] uppercase tracking-widest text-stone-400">Материалы</p>
                </div>
            </div>

            <div class="masonry-item reveal active">
                <div class="image-zoom rounded-2xl bg-stone-100">
                    <img src="https://images.unsplash.com/photo-1512918728675-ed5a9ecdebfd?auto=format&fit=crop&q=80&w=800" alt="">
                </div>
                <div class="mt-4">
                    <h3 class="font-serif text-lg">Idea Flow</h3>
                    <p class="text-[10px] uppercase tracking-widest text-stone-400">Кабинеты</p>
                </div>
            </div>

            <div class="masonry-item reveal">
                <div class="image-zoom rounded-2xl bg-stone-100 aspect-[2/3]">
                    <img src="https://images.unsplash.com/photo-1616486029423-aaa4789e8c9a?auto=format&fit=crop&q=80&w=800" class="h-full w-full object-cover" alt="">
                </div>
                <div class="mt-4">
                    <h3 class="font-serif text-lg">Vertical Living</h3>
                    <p class="text-[10px] uppercase tracking-widest text-stone-400">Пространство</p>
                </div>
            </div>

            <div class="masonry-item reveal">
                <img src="https://images.unsplash.com/photo-1502005229762-cf1b2da7c5d6?auto=format&fit=crop&q=80&w=800" class="rounded-2xl" alt="">
            </div>
            <div class="masonry-item reveal active">
                <img src="https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?auto=format&fit=crop&q=80&w=800" class="rounded-2xl" alt="">
            </div>
            <div class="masonry-item reveal active">
                <img src="https://images.unsplash.com/photo-1493663284031-b7e3aefcae8e?auto=format&fit=crop&q=80&w=800" class="rounded-2xl" alt="">
            </div>
            <div class="masonry-item reveal active">
                <img src="https://images.unsplash.com/photo-1615876234886-fd9a39faa97f?auto=format&fit=crop&q=80&w=800" class="rounded-2xl" alt="">
            </div>
            <div class="masonry-item reveal active">
                <img src="https://images.unsplash.com/photo-1617103996702-96ff29b1c467?auto=format&fit=crop&q=80&w=800" class="rounded-2xl" alt="">
            </div>
            <div class="masonry-item reveal">
                <img src="https://images.unsplash.com/photo-1600121848594-d8644e57abab?auto=format&fit=crop&q=80&w=800" class="rounded-2xl" alt="">
            </div>
            <div class="masonry-item reveal">
                <img src="https://images.unsplash.com/photo-1615529328331-f8917597711f?auto=format&fit=crop&q=80&w=800" class="rounded-2xl" alt="">
            </div>
            <div class="masonry-item reveal">
                <img src="https://images.unsplash.com/photo-1615874959474-d609969a20ed?auto=format&fit=crop&q=80&w=800" class="rounded-2xl" alt="">
            </div>
        </div>

        <div class="mt-16 text-center">
            <button class="bg-stone-100 hover:bg-stone-200 text-stone-600 px-8 py-3 rounded-full transition duration-300 text-sm tracking-widest uppercase font-medium">
                Загрузить еще
            </button>
        </div>
    </main>

    <section class="bg-plum-900 text-plum-50 py-20 px-4 text-center">
        <h2 class="text-3xl md:text-4xl serif-font mb-6 italic">Готовы обсудить ваш проект?</h2>
        <p class="max-w-xl mx-auto text-plum-100 font-light mb-8">
            Оставьте заявку, и мы свяжемся с вами для консультации и предварительного расчета.
        </p>
        <a href="/#contact" class="inline-block bg-white text-plum-900 px-10 py-4 rounded shadow-lg hover:bg-plum-50 transition transform hover:-translate-y-1 font-medium tracking-wide">
            Связаться с нами
        </a>
    </section>

    <footer class="bg-stone-50 py-32 border-t border-stone-100 px-8">
        <div class="max-w-1400px mx-auto">
            <div class="grid md:grid-cols-4 gap-16 mb-24">
                <div class="col-span-2">
                    <h2 class="serif text-4xl mb-8 tracking-widest">AVESIMYERA</h2>
                    <p class="text-stone-400 text-sm max-w-300px leading-relaxed font-light italic">
                        Создаем интерьеры, в которые хочется возвращаться. Собственное производство в России.
                    </p>
                </div>
                <div>
                    <h4 class="text-11px font-bold tracking-02em uppercase mb-8">Навигация</h4>
                    <ul class="space-y-4 text-11px text-stone-400 tracking-widest uppercase">
                        <li><a href="/catalog.html" class="hover:text-stone-800 transition-colors">Коллекции</a></li>
                        <li><a href="/interiors.html" class="hover:text-stone-800 transition-colors">Наши проекты</a></li>
                        <li><a href="/blog.html" class="hover:text-stone-800 transition-colors">Блог</a></li>
                        <li><a href="#" class="hover:text-stone-800 transition-colors">Контакты</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-11px font-bold tracking-02em uppercase mb-8">Контакты</h4>
                    <ul class="space-y-4 text-11px text-stone-400 tracking-widest uppercase leading-relaxed">
                        <li>Москва, Artplay, <br> ул. Нижняя Сыромятническая, 10</li>
                        <li>+7 (495) 000-00-00</li>
                        <li>studio@avesimyera.com</li>
                    </ul>
                </div>
            </div>
            <div class="flex flex-col items-center border-t border-stone-200 pt-12 text-10px font-bold tracking-04em text-stone-300 uppercase">
                <h2 class="serif text-2xl md:text-3xl tracking-widest text-stone-900 mb-6">AVESIMYERA</h2>
                <div class="flex space-x-6 text-xs uppercase tracking-widest font-light mb-6">
                    <a href="#" class="hover:text-[#C5A059]">VKONTAKTE</a>
                    <a href="#" class="hover:text-[#C5A059]">Telegram</a>
                </div>
                <p>&copy; 2025 AVESIMYERA. Designed for Excellence.</p>
            </div>
        </div>
    </footer>

    <div id="chat-widget" class="fixed bottom-6 right-6 z-40">
        <div id="chat-button" class="w-16 h-16 bg-stone-800 text-white rounded-full shadow-xl flex items-center justify-center hover:scale-110 transition-transform relative group cursor-pointer">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
            <span class="absolute -top-1 -right-1 w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center text-10px border-2 border-white">1</span>
            <div class="absolute right-20 bg-white text-stone-800 px-4 py-2 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap text-sm font-medium">
                Дизайнер на связи
            </div>
        </div>
        <div id="chat-window" class="hidden chat-window bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden mt-4">
            <div class="bg-stone-800 p-4 text-white flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80&w=100" alt="Designer" class="w-full h-full object-cover">
                    </div>
                    <div>
                        <h4 class="font-bold text-sm text-white">Avesimyera</h4>
                        <p class="text-10px text-stone-400 flex items-center gap-1">
                            <span class="w-1.5 h-1.5 bg-green-500 rounded-full"></span> В сети
                        </p>
                    </div>
                </div>
                <button onclick="toggleChatWindow()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6 6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="flex-1 p-4 overflow-y-auto bg-stone-50 space-y-4">
                <div class="flex flex-col gap-1 max-w-[80%]">
                    <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm text-sm text-stone-700">
                        Добрый день! Я чат-бот, чем могу быть вам полезен? Обсудим ваш проект?
                    </div>
                    <span class="text-10px text-stone-400">14:20</span>
                </div>
            </div>
            <div class="p-4 border-t border-stone-100 flex gap-2 items-center bg-white">
                <input 
                    placeholder="Ваше сообщение..." 
                    class="flex-1 bg-stone-100 border-none rounded-full px-4 py-2 text-sm focus:ring-2 focus:ring-stone-200 outline-none"
                />
                <button class="w-10 h-10 bg-stone-800 text-white rounded-full flex items-center justify-center">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div id="auth-modal-overlay" class="fixed inset-0 z-[120] bg-black/40 flex items-center justify-center hidden">
        <div class="bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto p-6">
            <div class="modal__header flex items-center justify-between mb-4">
                <span class="modal__title text-lg font-semibold">Авторизация</span>
                <button class="modal__close text-3xl w-10 h-10 flex items-center justify-center hover:bg-stone-100 rounded transition-colors" type="button" onclick="closeAuthModal()" aria-label="Закрыть">
                    ×
                </button>
            </div>
            <div class="modal__body">
                <form action="/local/action/user.php" method="POST" enctype="multipart/form-data">
                    <div class="signin-nav flex mb-4 gap-2">
                        <div class="signin-nav__item flex-1">
                            <div class="btn btn--accent w-full text-center py-2 bg-stone-900 text-white text-sm">Вход</div>
                        </div>
                        <div class="signin-nav__item flex-1">
                            <div class="btn btn--white w-full text-center py-2 border border-stone-200 text-sm">Регистрация</div>
                        </div>
                    </div>
                    <div class="signin-action__wrapper space-y-4">
                        <div class="signin-radio flex gap-4 text-sm">
                            <label class="radio flex items-center gap-2">
                                <input class="radio__input" type="radio" name="action" value="phone" checked>
                                <span class="radio__text">По телефону</span>
                            </label>
                            <label class="radio flex items-center gap-2">
                                <input class="radio__input" type="radio" name="action" value="email">
                                <span class="radio__text">По e-mail</span>
                            </label>
                        </div>
                        <div class="signin__data">
                            <div class="signin-phone__wrapper space-y-4">
                                <div class="signin-phone space-y-3">
                                    <div class="form-row">
                                        <div class="form-row__input-wrap">
                                            <input class="form-row__input w-full border border-stone-200 rounded px-3 py-2 text-sm" type="tel" placeholder="+375 (__) ___-__-__" name="auth_phone" value="">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <button class="btn btn--accent w-full bg-stone-900 text-white py-2 text-sm" type="submit">
                                            Получить код в Viber или SMS
                                        </button>
                                    </div>
                                </div>
                                <div class="signin-info text-xs text-stone-500 space-y-2 mt-2">
                                    <p>Мы отправим код подтверждения SMS-сообщением на указанный Вами номер телефона.</p>
                                    <p>
                                        Регистрируясь на Askona.by или авторизуясь через соцальные сети, вы соглашаетесь с
                                        <a href="/public_offer/" target="_blank" class="underline">Пользовательским соглашением</a>
                                        и
                                        <a href="/loyalty-program-rules/" target="_blank" class="underline">Правилами программы лояльности</a>.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="lightbox" class="fixed inset-0 z-50 bg-stone-900/95 hidden flex justify-center items-center opacity-0 transition-opacity duration-300">
        <button id="lightbox-close" class="absolute top-6 right-6 text-white text-4xl hover:text-plum-300 transition z-10">&times;</button>
        <button id="lightbox-prev" class="absolute left-4 md:left-8 text-white text-5xl hover:text-plum-300 transition opacity-50 hover:opacity-100 z-10">&#8249;</button>
        <button id="lightbox-next" class="absolute right-4 md:right-8 text-white text-5xl hover:text-plum-300 transition opacity-50 hover:opacity-100 z-10">&#8250;</button>
        
        <div class="max-w-5xl max-h-[90vh] w-full flex flex-col md:flex-row bg-white rounded-sm overflow-hidden shadow-2xl mx-4">
            <div class="w-full md:w-2/3 bg-black flex items-center justify-center bg-stone-100">
                <img id="lightbox-img" src="" alt="Detail" class="max-h-[60vh] md:max-h-[85vh] object-contain w-full h-full">
            </div>
            <div class="w-full md:w-1/3 p-8 flex flex-col justify-center bg-white">
                <span id="lightbox-category" class="text-plum-600 text-xs tracking-widest uppercase mb-2 font-bold"></span>
                <h3 id="lightbox-title" class="text-2xl serif-font text-stone-900 mb-4"></h3>
                <p id="lightbox-desc" class="text-stone-600 font-light text-sm leading-relaxed mb-6"></p>
                
                <div class="border-t border-stone-100 pt-6 mt-auto">
                    <p class="text-xs text-stone-400 uppercase tracking-wider mb-2">Материалы</p>
                    <div id="lightbox-tags" class="flex flex-wrap gap-2">
                    </div>
                </div>
                <button class="mt-8 w-full border border-plum-800 text-plum-800 py-3 text-sm hover:bg-plum-800 hover:text-white transition uppercase tracking-wider">
                    Хочу такой же
                </button>
            </div>
        </div>
    </div>

    <div id="side-cart" class="fixed inset-0 z-[110]">
        <div class="absolute inset-0 bg-black/20 backdrop-blur-sm" onclick="toggleCart()"></div>
        <div class="absolute right-0 top-0 h-full w-full max-w-lg bg-white p-12 flex flex-col shadow-2xl">
            <div class="flex justify-between items-center mb-16">
                <h3 class="serif text-3xl italic">Корзина</h3>
                <button onclick="toggleCart()" class="text-stone-400 hover:text-black">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M18 6 6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <div id="auth-bonus-block" class="hidden mb-6 bg-stone-50 rounded-xl p-6">
                <div class="flex gap-4 items-center">
                    <img class="w-16 h-16" src="https://cdn.askona.ru/local/templates/assets/img/cart/bonus/desktop.svg" alt="Бонусы">
                    <div class="flex-1">
                        <div class="text-sm mb-3">
                            <span class="font-semibold">1&nbsp;000 бонусов</span> за&nbsp;регистрацию и&nbsp;подтверждение email. 
                            <br>Бонусы&nbsp;можно потратить сразу
                        </div>
                        <div class="flex gap-3">
                            <input type="tel" name="phone" placeholder="+7 (9__) ___-__-__" class="flex-1 px-4 py-2 border border-stone-200 rounded text-sm" value="">
                            <button class="px-6 py-2 bg-stone-900 text-white text-xs uppercase tracking-widest hover:bg-stone-700 transition-colors rounded" type="button">Получить код</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="cart-items" class="flex-grow space-y-8 overflow-y-auto pr-4">
                <div id="empty-cart-message" class="space-y-6">
                    <div class="flex flex-col items-center justify-center text-center py-6 px-4 space-y-3 bg-stone-50 rounded-xl border border-stone-100">
                        <p class="text-[10px] uppercase tracking-widest text-stone-400">
                            Ваша корзина пока пуста
                        </p>
                        <p class="text-xs text-stone-500 max-w-xs">
                            Не теряйте времени и взгляните на наш каталог товаров
                        </p>
                        <button type="button" onclick="toggleCart(); showPage('catalog')" class="mt-2 px-6 py-2 bg-stone-900 text-white text-[10px] uppercase tracking-widest hover:bg-stone-700 transition-colors">
                            Начать покупки
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-5 gap-3">
                        <a href="/matrasy/collections/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_20_1766059663.png" alt="Матрасы" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Матрасы</span>
                        </a>
                        <a href="/krovati/collections/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_21_1766059685.png" alt="Кровати" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Кровати</span>
                        </a>
                        <a href="/tekstil/postelnoe-beljo/naznachenie_vzroslyj/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_24_1766059724.png" alt="Постельное белье" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Постельное белье</span>
                        </a>
                        <a href="/divany/collections/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_22_1766060066.png" alt="Диваны" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Диваны</span>
                        </a>
                        <a href="/podushki/askona1/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_23_1766059778.png" alt="Подушки" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Подушки</span>
                        </a>
                        <a href="/odeyala/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_26_1766060099.png" alt="Одеяла" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Одеяла</span>
                        </a>
                        <a href="/landing/gift_certificates/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_48_1766059813.png" alt="Подарочный сертификат" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Подарочный сертификат</span>
                        </a>
                        <a href="/detskie/collections/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_25_1766060150.png" alt="Для детей" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Для детей</span>
                        </a>
                        <a href="/shkafy/garderobnye-sistemy/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_49_1769070360.png" alt="Гардеробные" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Гардеробные</span>
                        </a>
                        <a href="/krovati/transformiruyushhee-osnovanie/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_43_176968661527183073467619.png" alt="Основания Ergomotion" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Основания Ergomotion</span>
                        </a>
                        <a href="/tekstil/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_27_1766059905.png" alt="Текстиль" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Текстиль</span>
                        </a>
                        <a href="/mebel/stol-i-ofisnie-kresla/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_45_1766059930.png" alt="Домашний офис" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Домашний офис</span>
                        </a>
                        <a href="/mebel/kuhonnye-stoly-i-kuhonnye-stulya/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_47_1766060218.png" alt="Мебель для кухни" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Мебель для кухни</span>
                        </a>
                        <a href="/matrasy/chehly/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_28_1766059991.png" alt="Чехлы" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Чехлы</span>
                        </a>
                        <a href="/divany/kresla/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_29_1766060251.png" alt="Кресла" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Кресла</span>
                        </a>
                        <a href="/mebel/tumby/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_30_1766060277.png" alt="Тумбочки" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Тумбочки</span>
                        </a>
                        <a href="/mebel/komody/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_31_1766060300.png" alt="Комоды" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Комоды</span>
                        </a>
                        <a href="/mebel/tumby-dlya-tv/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_44_1766060324.png" alt="Тумбы для ТВ" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Тумбы для ТВ</span>
                        </a>
                        <a href="/divany/pufy/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_32_1766060351.png" alt="Пуфы" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Пуфы</span>
                        </a>
                        <a href="/shkafy/raspashnye-shkafy/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_33_1766060404.png" alt="Распашные шкафы" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Распашные шкафы</span>
                        </a>
                        <a href="/mebel/banketki/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_34_1766060422.png" alt="Банкетки для спальни" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Банкетки для спальни</span>
                        </a>
                        <a href="/mebel/zhurnalnye-stoliki/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_35_1766060443.png" alt="Журнальные столы" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Журнальные столы</span>
                        </a>
                        <a href="/mebel/tualetnye-stoliki/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_36_1766060473.png" alt="Туалетные столики" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Туалетные столики</span>
                        </a>
                        <a href="/tovary-dlya-doma/lifestyle/odezhda/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_38_1766060493.png" alt="Одежда" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Одежда</span>
                        </a>
                        <a href="/tovary-dlya-doma/domashnie-massazhery/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_39_1766060510.png" alt="Массажеры" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Массажеры</span>
                        </a>
                        <a href="/tovary-dlya-doma/massazhnye-kresla/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_40_1766060546.png" alt="Массажные кресла" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Массажные кресла</span>
                        </a>
                        <a href="/tovary-dlya-doma/uvlazhniteli-i-moyki-vozduha/" class="flex flex-col items-center gap-2 hover:opacity-70 transition-opacity">
                            <img src="https://ir.askona.ru/upload/category_image/category_41_1766060531.png" alt="Климатическая техника" class="w-full aspect-square object-contain bg-stone-50 rounded-lg">
                            <span class="text-xs text-center text-stone-700">Климатическая техника</span>
                        </a>
                    </div>
                </div>
            </div>

            <div class="pt-8 border-t border-stone-100">
                <div class="flex justify-between items-end mb-8">
                    <span class="text-10px uppercase tracking-[0.2em] text-stone-400">Итоговая стоимость</span>
                    <span class="text-2xl font-light" id="cart-total">0 ₽</span>
                </div>
                <button type="button"
                        onclick="toggleCart(); window.location.href='/checkout.html'"
                        class="w-full bg-stone-900 text-white py-6 text-10px uppercase tracking-[0.3em] hover:bg-stone-700 transition-colors block text-center">
                    Перейти к оформлению
                </button>
            </div>
        </div>
    </div>

    <script>
        const masonryItems = [
            {
                src: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?q=80&w=800&auto=format&fit=crop',
                title: 'Pure Silence',
                category: 'Свет и воздух',
                description: 'Просторное пространство с акцентом на естественное освещение и воздушность интерьера.',
                tags: ['Свет', 'Воздух', 'Минимализм']
            },
            {
                src: 'https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?q=80&w=800&auto=format&fit=crop',
                title: 'Velvet Shadows',
                category: 'Глубокие текстуры',
                description: 'Интерьер с богатыми текстурами и глубокими оттенками, создающими уютную атмосферу.',
                tags: ['Бархат', 'Текстуры', 'Уют']
            },
            {
                src: 'https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=800&auto=format&fit=crop',
                title: 'Stone & Silk',
                category: 'Акценты',
                description: 'Сочетание натурального камня и мягких тканей для создания контраста.',
                tags: ['Камень', 'Шелк', 'Контраст']
            },
            {
                src: 'https://images.unsplash.com/photo-1594620302200-9a762244a156?q=80&w=800&auto=format&fit=crop',
                title: 'The Social Heart',
                category: 'Кухни-столовые',
                description: 'Пространство для общения и совместных трапез, где кухня становится центром дома.',
                tags: ['Кухня', 'Столовая', 'Общение']
            },
            {
                src: 'https://images.unsplash.com/photo-1513519245088-0e12902e5a38?auto=format&fit=crop&q=80&w=800',
                title: 'Spa Ritual',
                category: 'Релакс',
                description: 'Зона для отдыха и восстановления, созданная по принципам спа-пространств.',
                tags: ['Релакс', 'Спа', 'Отдых']
            },
            {
                src: 'https://images.unsplash.com/photo-1615874959474-d609969a20ed?auto=format&fit=crop&q=80&w=800',
                title: 'Raw Marble',
                category: 'Материалы',
                description: 'Использование натурального мрамора в его первозданной красоте.',
                tags: ['Мрамор', 'Натуральность', 'Роскошь']
            },
            {
                src: 'https://images.unsplash.com/photo-1512918728675-ed5a9ecdebfd?auto=format&fit=crop&q=80&w=800',
                title: 'Idea Flow',
                category: 'Кабинеты',
                description: 'Рабочее пространство, способствующее творчеству и продуктивности.',
                tags: ['Кабинет', 'Работа', 'Творчество']
            },
            {
                src: 'https://images.unsplash.com/photo-1616486029423-aaa4789e8c9a?auto=format&fit=crop&q=80&w=800',
                title: 'Vertical Living',
                category: 'Пространство',
                description: 'Максимальное использование вертикального пространства для создания ощущения простора.',
                tags: ['Высота', 'Простор', 'Архитектура']
            },
            {
                src: 'https://images.unsplash.com/photo-1502005229762-cf1b2da7c5d6?auto=format&fit=crop&q=80&w=800',
                title: 'Modern Elegance',
                category: 'Современность',
                description: 'Современный интерьер с элементами классической элегантности.',
                tags: ['Современность', 'Элегантность']
            },
            {
                src: 'https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?auto=format&fit=crop&q=80&w=800',
                title: 'Warm Minimalism',
                category: 'Минимализм',
                description: 'Минималистичный интерьер с теплыми акцентами для создания уюта.',
                tags: ['Минимализм', 'Тепло', 'Уют']
            },
            {
                src: 'https://images.unsplash.com/photo-1493663284031-b7e3aefcae8e?auto=format&fit=crop&q=80&w=800',
                title: 'Natural Harmony',
                category: 'Природа',
                description: 'Гармония с природой через использование натуральных материалов и цветов.',
                tags: ['Природа', 'Гармония', 'Эко']
            },
            {
                src: 'https://images.unsplash.com/photo-1615876234886-fd9a39faa97f?auto=format&fit=crop&q=80&w=800',
                title: 'Luxury Details',
                category: 'Роскошь',
                description: 'Детали, которые создают ощущение роскоши и изысканности.',
                tags: ['Роскошь', 'Детали', 'Изысканность']
            },
            {
                src: 'https://images.unsplash.com/photo-1617103996702-96ff29b1c467?auto=format&fit=crop&q=80&w=800',
                title: 'Cozy Corner',
                category: 'Уют',
                description: 'Уютный уголок для отдыха и чтения.',
                tags: ['Уют', 'Отдых', 'Чтение']
            },
            {
                src: 'https://images.unsplash.com/photo-1600121848594-d8644e57abab?auto=format&fit=crop&q=80&w=800',
                title: 'Artistic Space',
                category: 'Искусство',
                description: 'Пространство, где искусство встречается с функциональностью.',
                tags: ['Искусство', 'Функциональность']
            },
            {
                src: 'https://images.unsplash.com/photo-1615529328331-f8917597711f?auto=format&fit=crop&q=80&w=800',
                title: 'Timeless Design',
                category: 'Классика',
                description: 'Вневременной дизайн, который не выйдет из моды.',
                tags: ['Классика', 'Вневременность']
            },
            {
                src: 'https://images.unsplash.com/photo-1615874959474-d609969a20ed?auto=format&fit=crop&q=80&w=800',
                title: 'Serene Atmosphere',
                category: 'Спокойствие',
                description: 'Спокойная атмосфера для расслабления и медитации.',
                tags: ['Спокойствие', 'Медитация']
            }
        ];

        const portfolioItems = [];

        const categories = [
            { id: 'all', label: 'Все проекты' },
            { id: 'kitchen', label: 'Кухни' },
            { id: 'living', label: 'Гостиные & Мягкая' },
            { id: 'bedroom', label: 'Спальни' },
            { id: 'kids', label: 'Детские' },
            { id: 'storage', label: 'Шкафы & Хранение' }
        ];

        let currentFilter = 'all';
        let currentImageIndex = 0;
        let displayedItems = [];

        const gridEl = document.getElementById('gallery-grid');
        const filterContainerEl = document.getElementById('filter-container');
        const lightboxEl = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxTitle = document.getElementById('lightbox-title');
        const lightboxDesc = document.getElementById('lightbox-desc');
        const lightboxCat = document.getElementById('lightbox-category');
        const lightboxTags = document.getElementById('lightbox-tags');

        document.addEventListener('DOMContentLoaded', () => {
            renderFilters();
            initChart();
            
            const observerOptions = {
                threshold: 0.1
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
            
            const masonryImages = document.querySelectorAll('#gallery-grid .masonry-item img');
            masonryImages.forEach((img, index) => {
                const masonryItem = img.closest('.masonry-item');
                if (masonryItem) {
                    masonryItem.style.cursor = 'pointer';
                    masonryItem.addEventListener('click', () => {
                        if (masonryItems[index]) {
                            openMasonryLightbox(index);
                        }
                    });
                }
            });
        });

        function renderFilters() {
            filterContainerEl.innerHTML = categories.map(cat => `
                <button 
                    onclick="filterGallery('${cat.id}')"
                    class="filter-btn px-6 py-2 rounded-full text-sm transition-all duration-300 border border-transparent hover:border-plum-200
                    ${cat.id === currentFilter ? 'bg-plum-800 text-white shadow-md' : 'bg-white text-stone-600 hover:bg-stone-50'}"
                    data-cat="${cat.id}">
                    ${cat.label}
                </button>
            `).join('');
        }

        window.filterGallery = (catId) => {
            currentFilter = catId;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.dataset.cat === catId) {
                    btn.classList.remove('bg-white', 'text-stone-600');
                    btn.classList.add('bg-plum-800', 'text-white', 'shadow-md');
                } else {
                    btn.classList.add('bg-white', 'text-stone-600');
                    btn.classList.remove('bg-plum-800', 'text-white', 'shadow-md');
                }
            });

            displayedItems = catId === 'all' 
                ? portfolioItems 
                : portfolioItems.filter(item => item.category === catId);

            gridEl.innerHTML = '';
            
            displayedItems.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'gallery-item group relative overflow-hidden rounded-sm shadow-sm hover:shadow-xl cursor-pointer bg-white aspect-[4/5]';
                card.onclick = () => openLightbox(index);
                
                card.innerHTML = `
                    <img src="${item.src}" alt="${item.title}" class="w-full h-full object-cover transition duration-700 ease-in-out group-hover:scale-110">
                    <div class="overlay absolute inset-0 bg-plum-900/80 opacity-0 group-hover:opacity-100 transition duration-300 flex flex-col justify-center items-center text-center p-6">
                        <span class="text-plum-200 text-xs tracking-widest uppercase mb-2 font-medium translate-y-4 group-hover:translate-y-0 transition duration-500 delay-100">
                            ${categories.find(c => c.id === item.category)?.label || 'Интерьер'}
                        </span>
                        <h3 class="text-white text-xl serif-font mb-2 translate-y-4 group-hover:translate-y-0 transition duration-500 delay-200">
                            ${item.title}
                        </h3>
                        <p class="text-plum-100 text-xs font-light translate-y-4 group-hover:translate-y-0 transition duration-500 delay-300 opacity-80">
                            Нажмите, чтобы открыть
                        </p>
                    </div>
                `;
                gridEl.appendChild(card);
            });
        };

        function openMasonryLightbox(index) {
            const item = masonryItems[index];
            if (!item) return;
            
            lightboxImg.src = item.src;
            lightboxTitle.innerText = item.title;
            lightboxDesc.innerText = item.description;
            lightboxCat.innerText = item.category;
            
            lightboxTags.innerHTML = item.tags.map(tag => 
                `<span class="bg-stone-100 text-stone-500 text-[10px] px-2 py-1 rounded-sm uppercase tracking-wide border border-stone-200">${tag}</span>`
            ).join('');
            
            currentImageIndex = index;
            displayedItems = masonryItems;
            
            lightboxEl.classList.remove('hidden');
            setTimeout(() => {
                lightboxEl.classList.remove('opacity-0');
            }, 10);
            document.body.style.overflow = 'hidden';
        }

        function openLightbox(index) {
            currentImageIndex = index;
            updateLightboxContent();
            lightboxEl.classList.remove('hidden');
            setTimeout(() => {
                lightboxEl.classList.remove('opacity-0');
            }, 10);
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            lightboxEl.classList.add('opacity-0');
            setTimeout(() => {
                lightboxEl.classList.add('hidden');
            }, 300);
            document.body.style.overflow = 'auto';
        }

        function updateLightboxContent() {
            const item = displayedItems[currentImageIndex];
            lightboxImg.src = item.src;
            lightboxTitle.innerText = item.title;
            lightboxDesc.innerText = item.description;
            lightboxCat.innerText = categories.find(c => c.id === item.category)?.label;
            
            lightboxTags.innerHTML = item.tags.map(tag => 
                `<span class="bg-stone-100 text-stone-500 text-[10px] px-2 py-1 rounded-sm uppercase tracking-wide border border-stone-200">${tag}</span>`
            ).join('');
        }

        document.getElementById('lightbox-next').onclick = (e) => {
            e.stopPropagation();
            if (displayedItems.length === 0) {
                displayedItems = masonryItems;
            }
            currentImageIndex = (currentImageIndex + 1) % displayedItems.length;
            if (displayedItems === masonryItems) {
                const item = masonryItems[currentImageIndex];
                lightboxImg.src = item.src;
                lightboxTitle.innerText = item.title;
                lightboxDesc.innerText = item.description;
                lightboxCat.innerText = item.category;
                lightboxTags.innerHTML = item.tags.map(tag => 
                    `<span class="bg-stone-100 text-stone-500 text-[10px] px-2 py-1 rounded-sm uppercase tracking-wide border border-stone-200">${tag}</span>`
                ).join('');
            } else {
                updateLightboxContent();
            }
        };

        document.getElementById('lightbox-prev').onclick = (e) => {
            e.stopPropagation();
            if (displayedItems.length === 0) {
                displayedItems = masonryItems;
            }
            currentImageIndex = (currentImageIndex - 1 + displayedItems.length) % displayedItems.length;
            if (displayedItems === masonryItems) {
                const item = masonryItems[currentImageIndex];
                lightboxImg.src = item.src;
                lightboxTitle.innerText = item.title;
                lightboxDesc.innerText = item.description;
                lightboxCat.innerText = item.category;
                lightboxTags.innerHTML = item.tags.map(tag => 
                    `<span class="bg-stone-100 text-stone-500 text-[10px] px-2 py-1 rounded-sm uppercase tracking-wide border border-stone-200">${tag}</span>`
                ).join('');
            } else {
                updateLightboxContent();
            }
        };

        document.getElementById('lightbox-close').onclick = closeLightbox;
        lightboxEl.onclick = (e) => {
            if(e.target === lightboxEl) closeLightbox();
        };

        document.addEventListener('keydown', (e) => {
            if (lightboxEl.classList.contains('hidden')) return;
            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowRight') {
                if (displayedItems.length === 0) {
                    displayedItems = masonryItems;
                }
                document.getElementById('lightbox-next').click();
            }
            if (e.key === 'ArrowLeft') {
                if (displayedItems.length === 0) {
                    displayedItems = masonryItems;
                }
                document.getElementById('lightbox-prev').click();
            }
        });

        function initChart() {
            const ctx = document.getElementById('projectsChart').getContext('2d');
            
            Chart.defaults.font.family = "'Montserrat', sans-serif";
            Chart.defaults.color = '#57534e';

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Кухни', 'Спальни', 'Мягкая мебель', 'Хранение', 'Детские'],
                    datasets: [{
                        data: [35, 20, 25, 12, 8],
                        backgroundColor: [
                            '#5c3746',
                            '#86516a',
                            '#a36b87',
                            '#d5b5c7',
                            '#e7e5e4',
                        ],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: '#292524',
                            padding: 12,
                            titleFont: { family: 'Cormorant Garamond', size: 14 },
                            bodyFont: { size: 12 },
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.label}: ${context.raw}% проектов`;
                                }
                            }
                        }
                    },
                    cutout: '65%',
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }
    </script>
    <script type="module" src="/src/main.js"></script>
</body>
</html>
